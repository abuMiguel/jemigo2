<main class="admin-main">
  <div style="flex: auto; max-width:700px; margin:0 auto;">
    <div>
      <button class="btn-md" (click)="getArticles()">Get Articles</button>
      <select #blogId (change)="selectArticle(blogId?.value)" style="min-width: 50%;height:30px;">
        <option [value]="''">New Article</option>
        @for (article of blogArticles; track article) {
        <option [value]="article?._id">{{article.title}}</option>
        }
      </select>
    </div>

    <h3>Metadata</h3>
    <div>
      <div>
        <label style="display:inline-block; width: 85px;">Title</label>
        <input style="width: 85%;" type="text" [(ngModel)]="ar.title">
      </div>
      <div>
        <label style="display:inline-block; width: 85px;">URL Slug</label>
        <input style="width: 85%;" type="text" [(ngModel)]="ar.path" placeholder="my-article-path">
      </div>
      <div>
        <label style="display:inline-block; width: 85px;">Description</label>
        <input style="width: 85%;" type="text" [(ngModel)]="ar.description" placeholder="This is my article about...">
      </div>
      <div>
        <label style="display:inline-block; width: 85px;">Image Path</label>
        <input style="width: 85%;" type="text" [(ngModel)]="ar.imagePath" placeholder="https://res.cloudinary.com/image/upload/my-image.webp">
      </div>
      <div>
        <label style="display:inline-block; width: 85px ;">Alt</label>
        <input style="width: 85%;" type="text" [(ngModel)]="ar.imageAlt" placeholder="My Image Description">
      </div>
      <div>
        <label style="display:inline-block; width: 85px;">Tags</label>
        <input style="width: 85%;" type="text" [(ngModel)]="tags" placeholder="top, featured">
      </div>
      <div>
        <label style="display:inline-block; width: 85px;">Partner Tag</label>
        <select style="width: 85%; height:30px;" [(ngModel)]="selectedPartnerTag">
          <option [value]="''">(default)</option>
          @for (tag of partnerTags; track tag) {
            <option [value]="tag">{{tag}}</option>
          }
        </select>
      </div>
    </div>
    <div class="admin-article-header">
      <div class="admin-article-title">
        <h3 style="margin:0">Edit Article</h3>
        <span class="status-badge" [class.published]="ar.published" [class.unpublished]="!ar.published">{{ ar.published ? 'Published' : 'Draft' }}</span>
      </div>

      <div class="admin-action-group">
        <button class="admin-save-btn" (click)="saveArticle()">Save</button>
        <button class="admin-publish-btn" [disabled]="ar?.published" (click)="publishArticle()">Publish</button>
      </div>
    </div>

    <!-- transient success / error toast -->
    <div *ngIf="successVisible()" class="admin-toast" [attr.data-kind]="successKind()" role="status" aria-live="polite">
      {{ successMessage() }}
    </div>


    <!-- Quill toolbar -->
    <div #editor class="quill-editor-large"></div>

  </div>
</main>